{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "execution-plan.schema.json",
  "title": "Execution Plan (Screen-Level)",
  "type": "object",
  "additionalProperties": false,
  "required": ["planVersion", "orderingRules", "screens"],
  "properties": {
    "planVersion": { "type": "string", "minLength": 1 },
    "orderingRules": {
      "type": "array",
      "items": { "type": "string", "minLength": 1 },
      "minItems": 1
    },
    "screens": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "screenId",
          "primaryRoute",
          "complexity",
          "phase",
          "priority",
          "dependencies",
          "sourceFiles"
        ],
        "properties": {
          "screenId": { "type": "string", "minLength": 1 },
          "primaryRoute": { "type": "string", "minLength": 1 },
          "routes": { "type": "array", "items": { "type": "string", "minLength": 1 } },
          "complexity": { "type": "string", "enum": ["low", "medium", "high"] },
          "phase": { "type": "string", "enum": ["foundation", "standard", "guided"] },
          "priority": { "type": "integer", "minimum": 0 },
          "dependencies": { "type": "array", "items": { "type": "string", "minLength": 1 } },
          "sourceFiles": {
            "type": "object",
            "additionalProperties": false,
            "required": ["controllers", "views", "viewModels", "css"],
            "properties": {
              "controllers": { "type": "array", "items": { "type": "string", "minLength": 1 } },
              "views": { "type": "array", "items": { "type": "string", "minLength": 1 } },
              "viewModels": { "type": "array", "items": { "type": "string", "minLength": 1 } },
              "css": { "type": "array", "items": { "type": "string", "minLength": 1 } }
            }
          }
        }
      }
    }
  }
}
